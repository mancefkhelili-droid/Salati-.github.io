<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Primary Meta Tags -->
    <title>ุตูุงุชู ูู ููุชูุง - Prayer Times App</title>
    <meta name="title" content="ุตูุงุชู ูู ููุชูุง - Prayer Times App">
    <meta name="description" content="ุชุทุจูู ุฃููุงุช ุงูุตูุงุฉ ุงูุฏููู ูุน ุงูุชูุจููุงุช ูุงูุฃุฐุงู. ูุนูู ุจุฏูู ุฅูุชุฑูุช ููุญุชุฑู ุฎุตูุตูุชู ุจุงููุงูู. Accurate prayer times with notifications and Athan. Works offline and respects your privacy.">
    <meta name="keywords" content="prayer times, salat, ุฃููุงุช ุงูุตูุงุฉ, ุฃุฐุงู, athan, muslim app, islamic app">
    <meta name="author" content="Salati Fi Waqtiha">
    <meta name="theme-color" content="#1a472a">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://salati-fi-waqtiha.app/">
    <meta property="og:title" content="ุตูุงุชู ูู ููุชูุง - Prayer Times ">
    <meta property="og:description" content="ุชุทุจูู ุฃููุงุช ุงูุตูุงุฉ ุงูุฏููู ูุน ุงูุชูุจููุงุช ูุงูุฃุฐุงู. ูุนูู ุจุฏูู ุฅูุชุฑูุช ููุญุชุฑู ุฎุตูุตูุชู ุจุงููุงูู.">
    <meta property="og:image" content="https://salati-fi-waqtiha.app/icon-512.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://salati-fi-waqtiha.app/">
    <meta property="twitter:title" content="ุตูุงุชู ูู ููุชูุง - Prayer Times ">
    <meta property="twitter:description" content="ุชุทุจูู ุฃููุงุช ุงูุตูุงุฉ ุงูุฏููู ูุน ุงูุชูุจููุงุช ูุงูุฃุฐุงู. ูุนูู ุจุฏูู ุฅูุชุฑูุช ููุญุชุฑู ุฎุตูุตูุชู ุจุงููุงูู.">
    <meta property="twitter:image" content="https://salati-fi-waqtiha.app/icon-512.png">
    
    <!-- Security -->
    <!-- CSP removed temporarily to allow Adhan.js CDN loading -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://pagead2.googlesyndication.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; media-src 'self'; connect-src 'self'; frame-src https://googleads.g.doubleclick.net;"> -->
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- JSON-LD Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "ุตูุงุชู ูู ููุชูุง",
      "alternateName": "Salati Fi Waqtiha",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any (Progressive Web App)",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "ุชุทุจูู ุฃููุงุช ุงูุตูุงุฉ ุงูุฏููู ูุน ุงูุชูุจููุงุช ูุงูุฃุฐุงู. ูุนูู ุจุฏูู ุฅูุชุฑูุช ููุญุชุฑู ุฎุตูุตูุชู ุจุงููุงูู.",
      "featureList": [
        "ุญุณุงุจ ุฃููุงุช ุงูุตูุงุฉ ุจุฏูุฉ ููููุฉ",
        "ุชูุจููุงุช ูุน ุตูุช ุงูุฃุฐุงู",
        "ูุธุงู ุชูุจููุงุช ูุชูุฏู ูุน ูููุงุช .ics ููุชูููู",
        "ุชูุจููุงุช ููููุฉ ูุชูุฑุฑุฉ ูุฌููุน ุงูุตููุงุช",
        "ุชูุจููุงุช ูุฎุตุตุฉ ูุตููุงุช ูุนููุฉ",
        "ูุนูู ุจุฏูู ุฅูุชุฑูุช",
        "ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช (ุงูุนุฑุจูุฉุ ุงููุฑูุณูุฉุ ุงูุฅูุฌููุฒูุฉ)",
        "ุงููุถุน ุงููููู",
        "ุฎุตูุตูุฉ ูุงููุฉ - ูุง ุชูุฌุฏ ุฎูุงุฏู ุฎุงุฑุฌูุฉ",
        "ุชุญุฏูุฏ ุงููููุน ุงูุฏููู ูุน ุฎูุงุฑ ุงูุงุฎุชูุงุฑ ุงููุฏูู"
      ],
      "screenshot": "https://salati-fi-waqtiha.app/screenshot.png",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "ratingCount": "1000"
      }
    }
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2 data-i18n="loading">ุฌุงุฑู ุงูุชุญููู...</h2>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title" data-i18n="app_title">ุตูุงุชู ูู ููุชูุง</h1>
                <div class="header-actions">
                    <button id="dark-mode-toggle" class="icon-btn" aria-label="Toggle dark mode">
                        <svg class="sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="moon-icon hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    <button id="header-install-btn" class="icon-btn hidden" aria-label="Install App" style="color: var(--accent-secondary);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                    </button>
                    <button id="settings-btn" class="icon-btn" aria-label="Settings">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path>
                            <path d="M4.93 4.93l4.24 4.24m5.66 5.66l4.24 4.24m0-14.14l-4.24 4.24m-5.66 5.66L4.93 19.07"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Location Info -->
        <section class="location-section">
            <div class="location-info">
                <svg class="location-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <span id="location-text" data-i18n="detecting_location">ุฌุงุฑู ุชุญุฏูุฏ ุงููููุน...</span>
            </div>
            <div class="date-info">
                <span id="hijri-date"></span>
                <span class="date-separator">โข</span>
                <span id="gregorian-date"></span>
            </div>
            <div class="current-time-display" id="current-time">--:--:--</div>
        </section>

        <!-- Next Prayer Countdown -->
        <section class="countdown-section">
            <div class="countdown-card">
                <div class="countdown-label" data-i18n="next_prayer">ุงูุตูุงุฉ ุงููุงุฏูุฉ</div>
                <div class="countdown-prayer" id="next-prayer-name">ุงููุฌุฑ</div>
                
                <!-- Time Remaining Label -->
                <div style="font-size: 0.8rem; opacity: 0.8; margin-bottom: 4px;" data-i18n="time_remaining">ุงูููุช ุงููุชุจูู</div>
                <div class="countdown-timer" id="countdown-timer">00:00:00</div>
                
                <div class="countdown-time" id="next-prayer-time">05:30</div>
                
                <!-- Stop Athan Button -->
                <button id="stop-athan" class="btn-stop-athan" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="6" y="6" width="12" height="12"></rect>
                    </svg>
                    ุฅููุงู ุงูุฃุฐุงู / Stop Athan
                </button>
            </div>
        </section>

        <!-- Prayer Times List (New Vertical Layout) -->
        <section class="prayer-times-section">
            <div class="prayer-list" id="prayer-grid">
                <!-- Prayer rows will be inserted here by JavaScript -->
            </div>
        </section>

        <!-- Qibla Finder Section -->
        <section class="qibla-section hidden" id="qibla-section">
            <h2 class="section-title" data-i18n="qibla_finder">ุงุชุฌุงู ุงููุจูุฉ / Qibla Finder</h2>
            <div class="qibla-container">
                <div class="compass">
                    <div class="compass-arrow" id="qibla-arrow"></div>
                    <div class="kaaba-icon">๐</div>
                </div>
                <p class="qibla-status" id="qibla-status" data-i18n="move_phone">ุญุฑู ูุงุชูู ููุนุงูุฑุฉ ุงูุจูุตูุฉ / Calibration...</p>
            </div>
        </section>

        <!-- Digital Tasbeeh Section -->
        <section class="tasbeeh-section">
            <h2 class="section-title" data-i18n="electronic_tasbeeh">ุงูุณุจุญุฉ ุงูุฅููุชุฑูููุฉ / Tasbeeh</h2>
            <div class="tasbeeh-container">
                <div class="tasbeeh-display" id="tasbeeh-count">0</div>
                <button class="tasbeeh-btn" id="tasbeeh-click-btn">
                    <span>ุณุจูุญ / Tap</span>
                </button>
                <button class="tasbeeh-reset" id="tasbeeh-reset-btn" data-i18n="reset">tุตููุฑ / Reset</button>
            </div>
        </section>

        <!-- Alarm System Section -->
        <section class="alarm-section">
            <h2 class="section-title">โฐ ูุธุงู ุงูุชูุจููุงุช / Alarm System</h2>
            
            <!-- Alarm Mode Buttons -->
            <div class="alarm-modes">
                <button id="enable-lifetime-alarms" class="btn-alarm lifetime">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>ุชูุนูู ููู ุงูุตููุงุช ุฏุงุฆูุงู<br><small>Enable All Prayers Forever</small></span>
                </button>
                
                <button id="enable-today-alarms" class="btn-alarm today">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span>ุตููุงุช ุงูููู ููุท<br><small>Today Only</small></span>
                </button>
            </div>

            <!-- Individual Prayer Alarms -->
            <div class="alarm-toggles">
                <div class="alarm-header">
                    <h3>ุชุญุฏูุฏ ุตููุงุช ูุนููุฉ / Select Specific Prayers</h3>
                    <button id="select-all-alarms" class="btn-secondary small">
                        ุชุญุฏูุฏ ุงููู / Select All
                    </button>
                </div>
                
                <div class="alarm-list">
                    <div class="alarm-item">
                        <label class="alarm-label">
                            <input type="checkbox" id="alarm-toggle-fajr" class="alarm-checkbox">
                            <span class="alarm-name">ุงููุฌุฑ / Fajr</span>
                            <span class="alarm-status"></span>
                        </label>
                    </div>
                    
                    <div class="alarm-item">
                        <label class="alarm-label">
                            <input type="checkbox" id="alarm-toggle-dhuhr" class="alarm-checkbox">
                            <span class="alarm-name">ุงูุธูุฑ / Dhuhr</span>
                            <span class="alarm-status"></span>
                        </label>
                    </div>
                    
                    <div class="alarm-item">
                        <label class="alarm-label">
                            <input type="checkbox" id="alarm-toggle-asr" class="alarm-checkbox">
                            <span class="alarm-name">ุงูุนุตุฑ / Asr</span>
                            <span class="alarm-status"></span>
                        </label>
                    </div>
                    
                    <div class="alarm-item">
                        <label class="alarm-label">
                            <input type="checkbox" id="alarm-toggle-maghrib" class="alarm-checkbox">
                            <span class="alarm-name">ุงููุบุฑุจ / Maghrib</span>
                            <span class="alarm-status"></span>
                        </label>
                    </div>
                    
                    <div class="alarm-item">
                        <label class="alarm-label">
                            <input type="checkbox" id="alarm-toggle-isha" class="alarm-checkbox">
                            <span class="alarm-name">ุงูุนุดุงุก / Isha</span>
                            <span class="alarm-status"></span>
                        </label>
                    </div>
                </div>
                
                <div class="alarm-note">
                    <p>๐ฅ <strong>ููุงุญุธุฉ:</strong> ุนูุฏ ุชูุนูู ุงูุชูุจููุ ุณูุชู ุชูุฒูู ููู .ics ููููู ุฅุถุงูุชู ุฅูู ุชูููู ูุงุชูู.</p>
                    <p>๐ฅ <strong>Note:</strong> When you enable an alarm, an .ics file will be downloaded that you can add to your phone's calendar.</p>
                </div>
            </div>
        </section>

        <!-- Share Application -->
        <section class="share-section">
            <button id="share-app-btn" class="btn-primary share-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="18" cy="5" r="3"></circle>
                    <circle cx="6" cy="12" r="3"></circle>
                    <circle cx="18" cy="19" r="3"></circle>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                </svg>
                <span data-i18n="share_with_loved">ุดุงุฑู ุงูุชุทุจูู ูุน ุฃุญุจุงุจู</span>
            </button>
        </section>

        <!-- AdSense Placeholder -->
        <section class="ad-section">
            <div class="ad-container">
                <!-- Google AdSense Ad Unit -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                     data-ad-slot="XXXXXXXXXX"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
            </div>
        </section>

        <!-- Settings Panel -->
        <div id="settings-panel" class="settings-panel hidden">
            <div class="settings-content">
                <div class="settings-header">
                    <h2 data-i18n="settings">ุงูุฅุนุฏุงุฏุงุช</h2>
                    <button id="close-settings" class="icon-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="settings-body">
                    <!-- Language Selection -->
                    <div class="setting-group">
                        <label class="setting-label" data-i18n="language">ุงููุบุฉ</label>
                        <select id="language-select" class="setting-select">
                            <option value="ar">ุงูุนุฑุจูุฉ</option>
                            <option value="fr">Franรงais</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <!-- Calculation Method -->
                    <div class="setting-group">
                        <label class="setting-label" data-i18n="calculation_method">ุทุฑููุฉ ุงูุญุณุงุจ</label>
                        <select id="method-select" class="setting-select">
                            <option value="MuslimWorldLeague">Muslim World League</option>
                            <option value="Egyptian">Egyptian General Authority</option>
                            <option value="Karachi">University of Islamic Sciences, Karachi</option>
                            <option value="UmmAlQura">Umm Al-Qura University, Makkah</option>
                            <option value="Dubai">Dubai</option>
                            <option value="Qatar">Qatar</option>
                            <option value="Kuwait">Kuwait</option>
                            <option value="MoonsightingCommittee">Moonsighting Committee</option>
                            <option value="Singapore">Singapore</option>
                            <option value="NorthAmerica">Islamic Society of North America</option>
                        </select>
                    </div>

                    <!-- Notification Settings -->
                    <div class="setting-group">
                        <label class="setting-label" data-i18n="notifications">ุงูุชูุจููุงุช</label>
                        <button id="enable-notifications" class="btn-primary" data-i18n="enable_notifications">ุชูุนูู ุงูุชูุจููุงุช</button>
                        
                        <!-- Athan Selection -->
                        <div class="athan-selector" style="margin-top: 15px;">
                            <label class="setting-label" style="font-size: 0.9rem;" data-i18n="athan_voice">ุตูุช ุงูุฃุฐุงู</label>
                            <select id="athan-select" class="setting-select">
                                <option value="./athan.mp3" data-i18n="athan_makkah">ุฃุฐุงู ููุฉ (ุงูุงูุชุฑุงุถู)</option>
                                <option value="./athan_madina.mp3" data-i18n="athan_madina">ุฃุฐุงู ุงููุฏููุฉ</option>
                                <option value="./athan_quds.mp3" data-i18n="athan_quds">ุฃุฐุงู ุงููุฏุณ</option>
                            </select>
                        </div>
                        
                        <div style="margin-top: 10px;">
                            <button id="test-notification" class="btn-secondary" style="width: 100%;" data-i18n="test_notification">ุชุฌุฑุจุฉ ุงูุชูุจูู</button>
                        </div>

                        <p class="setting-hint" data-i18n="notification_hint">ุณูุชู ุชุดุบูู ุงูุฃุฐุงู ุนูุฏ ููุช ุงูุตูุงุฉ</p>
                    </div>

                    <!-- City Selection -->
                    <div class="setting-group">
                        <label class="setting-label" data-i18n="select_city">ุงุฎุชุฑ ุงููุฏููุฉ</label>
                        <select id="city-select" class="setting-select">
                            <option value="manual" disabled>-- Select City / ุงุฎุชุฑ ุงููุฏููุฉ --</option>
                            <option value="21.4225,39.8262">Makkah (ููุฉ ุงูููุฑูุฉ)</option>
                            <option value="24.4672,39.6102">Madina (ุงููุฏููุฉ ุงููููุฑุฉ)</option>
                            <option value="31.7683,35.2137">Al-Quds (ุงููุฏุณ)</option>
                            <option value="24.7136,46.6753">Riyadh (ุงูุฑูุงุถ)</option>
                            <option value="30.0444,31.2357">Cairo (ุงููุงูุฑุฉ)</option>
                            <option value="25.276987,55.296249">Dubai (ุฏุจู)</option>
                            <option value="41.0082,28.9784">Istanbul (ุฅุณุทูุจูู)</option>
                            <option value="51.5074,-0.1278">London (ููุฏู)</option>
                            <option value="40.7128,-74.0060">New York (ูููููุฑู)</option>
                            <option value="48.8566,2.3522">Paris (ุจุงุฑูุณ)</option>
                            <option value="3.1390,101.6869">Kuala Lumpur (ููุงูุงููุจูุฑ)</option>
                            <option value="-6.2088,106.8456">Jakarta (ุฌุงูุฑุชุง)</option>
                            <!-- Start of Maghreb Cities -->
                            <option value="36.7525,3.0420">Algiers (ุงูุฌุฒุงุฆุฑ)</option>
                            <option value="35.6969,-0.6331">Oran (ููุฑุงู)</option>
                            <option value="36.3650,6.6147">Constantine (ูุณูุทููุฉ)</option>
                            <option value="36.9006,7.7669">Annaba (ุนูุงุจุฉ)</option>
                            <option value="36.7372,5.0657">Bejaia (ุจุฌุงูุฉ)</option>
                            <option value="35.6971,4.5428">Msila (ุงููุณููุฉ)</option>
                            <option value="36.8065,10.1815">Tunis (ุชููุณ)</option>
                            <option value="33.5731,-7.5898">Casablanca (ุงูุฏุงุฑ ุงูุจูุถุงุก)</option>
                            <option value="34.0209,-6.8416">Rabat (ุงูุฑุจุงุท)</option>
                            <option value="32.8951,13.1802">Tripoli (ุทุฑุงุจูุณ)</option>
                            <option value="18.0735,-15.9582">Nouakchott (ููุงูุดูุท)</option>
                        </select>
                    </div>

                    <!-- Install PWA -->
                    <div class="setting-group">
                        <button id="install-pwa" class="btn-primary hidden" data-i18n="install_app">ุชุซุจูุช ุงูุชุทุจูู</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    
    <!-- AdSense Script (Add your publisher ID) -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
</body>
</html>
